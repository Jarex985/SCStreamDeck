/* generated: pi-function-key.js */
(function(){function c(n){const t=[];return Array.isArray(n)&&n.forEach(n=>{const i=n.label||"Other",r=n.options||[];r.forEach(n=>{const u=n.disabledReason&&(n.disabledReason.includes("Controller")||n.disabledReason.includes("Axis"));if(!u){let r=i;n.disabledReason==="No supported binding"&&(r="Unbound Functions");t.push({value:n.value,text:n.text,group:r,details:n.details,disabled:n.disabled||!1})}})}),t}function l(i){r=c(i);n?.setItems?.(r);n?.setSelectedValue?.(t,{rerender:!1});t&&o(t)}function e(i,r={}){const e=r.persist!==!1;u=!0;t=i.value;n?.setSelectedValue?.(i.value,{rerender:!0});f(i);e&&h(i.value);setTimeout(()=>{u=!1},200)}function o(n){const t=r.find(t=>t.value===n);t&&e(t,{persist:!1})}function f(n){const i=document.querySelector(".pi-details");if(i){if(!n||!n.details){const n=i.querySelector(".pi-details__title");n&&(n.textContent="");const t=document.querySelector(".pi-description__content");t&&(t.textContent="");document.getElementById("pi-details__binding-keyboard").textContent="";document.getElementById("pi-details__binding-mouse").textContent="";document.getElementById("pi-details__binding-gamepad").textContent="";document.getElementById("pi-details__binding-joystick").textContent="";return}const t=n.details,f=String(t.label||n.text||""),e=String(t.description||""),o=Array.isArray(t.devices)?t.devices:[],r=i.querySelector(".pi-details__title");r&&(r.textContent=f);["keyboard","mouse","gamepad","joystick"].forEach(n=>{const t=o.find(t=>t.device&&t.device.toLowerCase()===n.toLowerCase()),i=document.getElementById(`pi-details__binding-${n}`);let r="Unbound";if(t&&Array.isArray(t.bindings)&&t.bindings.length>0){const n=t.bindings.map(n=>String(n.display||n.raw||"")).filter(n=>n);n.length>0&&(r=n.join(", "))}i&&(i.textContent=r)});const u=document.querySelector(".pi-description__content");u&&(u.textContent=e||"No description available.")}}const i=globalThis.SCPI;i?.bus?.start?.();const n=i?.ui?.dropdown?.initDropdown?.({rootId:"functionDropdown",searchEnabled:!0,minLoadingMs:0,successFlashMs:100,emptyText:"No matching functions found",maxResults:50,getText:n=>String(n?.text??""),getValue:n=>String(n?.value??""),getGroup:n=>String(n?.group??""),isDisabled:n=>!!n?.disabled,onSelect:n=>e(n,{persist:!0})});n?.setLoading?.(!0,"Loading functions");let r=[],t="",u=!1;const[s,h]=globalThis.SDPIComponents.useSettings("function",n=>{u||(t=n,o(n))});i?.ui?.filePicker?.createFilePicker?.({rootId:"audioFilePicker",placeholderText:"No file selected",settingsKey:"clickSoundPath"});i?.bus?.on?.(t=>{const i=t?.functionsLoaded;i===!0&&(n?.setLoading?.(!1),document.getElementById("functionDropdown")?.classList.remove("pi-dropdown--error"),l(t.functions||[]));i===!1&&(document.getElementById("functionDropdown")?.classList.add("pi-dropdown--error"),n?.setLoading?.(!0,"No installation detected. Set custom path."),n?.setItems?.([]),f(null))});i?.util?.onDocumentReady?.(()=>{const r=s();r?t=r:f(null);n?.setSelectedValue?.(t,{rerender:!1});i?.bus?.sendOnce?.("pi.connected","propertyInspectorConnected")})})()
